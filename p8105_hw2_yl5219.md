p8105_hw2_yl5219
================
Yuqing Liu
2023-09-27

# Problem 1

### pols-month.csv

clean the data in pols-month and check the first six rows using
`head()`:

``` r
pols_month = read.csv(file = "./fivethirtyeight_datasets/pols-month.csv") |> janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"))|>
  mutate(
    month =
      case_match(
        month,
        "01" ~ "jan",
        "02" ~ "feb",
        "03" ~ "mar",
        "04" ~ "apr",
        "05" ~ "may",
        "06" ~ "jun",
        "07" ~ "jul",
        "08" ~ "aug",
        "09" ~ "sep",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec")
      )|>
  mutate(president=case_match(
           prez_dem,
           1~"democratic",
           0~"republican"))  |>
  select(-prez_dem, -prez_gop, -day)

head(pols_month)
```

    ##   year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem  president
    ## 1 1947   jan      23      51     253      23      45     198 democratic
    ## 2 1947   feb      23      51     253      23      45     198 democratic
    ## 3 1947   mar      23      51     253      23      45     198 democratic
    ## 4 1947   apr      23      51     253      23      45     198 democratic
    ## 5 1947   may      23      51     253      23      45     198 democratic
    ## 6 1947   jun      23      51     253      23      45     198 democratic

### snp.csv

clean and check the data in snp:

``` r
snp = read.csv(file = "./fivethirtyeight_datasets/snp.csv")|>
  janitor::clean_names()|>
  separate(date, into = c("month", "day", "year"))|>
  mutate(
    month =
      case_match(
        month,
        "1" ~ "jan",
        "2" ~ "feb",
        "3" ~ "mar",
        "4" ~ "apr",
        "5" ~ "may",
        "6" ~ "jun",
        "7" ~ "jul",
        "8" ~ "aug",
        "9" ~ "sep",
        "10" ~ "oct",
        "11" ~ "nov",
        "12" ~ "dec")
      )|>select(-day)|>
  select(year, month, everything())

head(snp)
```

    ##   year month   close
    ## 1   15   jul 2079.65
    ## 2   15   jun 2063.11
    ## 3   15   may 2107.39
    ## 4   15   apr 2085.51
    ## 5   15   mar 2067.89
    ## 6   15   feb 2104.50

### unemployment.csv

clean and check the data in unemployment:

``` r
unemployment = read.csv(file = "./fivethirtyeight_datasets/unemployment.csv")|>
  janitor::clean_names()|>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment")|>
    mutate(year=as.character(year))

head(unemployment)
```

    ## # A tibble: 6 × 3
    ##   year  month unemployment
    ##   <chr> <chr>        <dbl>
    ## 1 1948  jan            3.4
    ## 2 1948  feb            3.8
    ## 3 1948  mar            4  
    ## 4 1948  apr            3.9
    ## 5 1948  may            3.5
    ## 6 1948  jun            3.6

### merge datasets

join the datasets:

``` r
df=pols_month|>
  left_join(snp,by=c("year", "month"))|>
  left_join(unemployment, by=c("year", "month"))

head(df)
```

    ##   year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem  president close
    ## 1 1947   jan      23      51     253      23      45     198 democratic    NA
    ## 2 1947   feb      23      51     253      23      45     198 democratic    NA
    ## 3 1947   mar      23      51     253      23      45     198 democratic    NA
    ## 4 1947   apr      23      51     253      23      45     198 democratic    NA
    ## 5 1947   may      23      51     253      23      45     198 democratic    NA
    ## 6 1947   jun      23      51     253      23      45     198 democratic    NA
    ##   unemployment
    ## 1           NA
    ## 2           NA
    ## 3           NA
    ## 4           NA
    ## 5           NA
    ## 6           NA

### discussion

- The dataset `pols_month` contains 822 rows and 9 columns. It contains
  variables including `year`, `month`, `gov_gop`, `sen_gop`, `rep_gop`,
  `gov_dem`, `sen_dem`, `rep_dem`, `president`. The range of `year` is
  from 1947 to 2015.

- The dataset `snp` contains 787 rows and 3 columns. It contains
  variables including `year`, `month`, `close`.The range of `year` is
  from 00 to 99.

- The dataset `unemployment` contains 816 rows and 3 columns. It
  contains variables including `year`, `month`, `unemployment`.The range
  of `year` is from 1948 to 2015.

- The merged dataset `df` contains 822 rows and 11 columns. It contains
  variables including `year`, `month`, `gov_gop`, `sen_gop`, `rep_gop`,
  `gov_dem`, `sen_dem`, `rep_dem`, `president`, `close`.The range of
  `year` is from 1947 to 2015.

# Problem 2

### Mr.Trash Wheel

Below we read and clean Mr. Trash Wheel dataset:

- specify the sheet in the Excel file and to omit non-data entries (rows
  with notes / figures; columns containing notes) using arguments in
  `read_excel()`
- use reasonable variable names by `janitor::clean_names()`
- omit rows that do not include dumpster-specific data by
  `filter(row_number() <= n()-1)` to delete the last row
- Home power notes mentioned each ton of trash equates to on average 500
  kilowatts of electricity and an average household will use 30
  kilowatts per day. Based on this information, we can calculate the
  number of homes powered by Mr. Trash Wheel `homes_powered` by
  `mutate(homes_powered=weight_tons*500/30)`.

``` r
mr_trash_wheel = read_excel("./202309 Trash Wheel Collection Data.xlsx", 
                            sheet="Mr. Trash Wheel", 
                            range = cell_cols("A:N"))|>
  janitor::clean_names()|> 
  filter(row_number() <= n()-1)|>
  mutate(homes_powered=weight_tons*500/30)

mr_trash_wheel
```

    ## # A tibble: 584 × 14
    ##    dumpster month year  date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ##  1        1 May   2014  2014-05-16 00:00:00        4.31                 18
    ##  2        2 May   2014  2014-05-16 00:00:00        2.74                 13
    ##  3        3 May   2014  2014-05-16 00:00:00        3.45                 15
    ##  4        4 May   2014  2014-05-17 00:00:00        3.1                  15
    ##  5        5 May   2014  2014-05-17 00:00:00        4.06                 18
    ##  6        6 May   2014  2014-05-20 00:00:00        2.71                 13
    ##  7        7 May   2014  2014-05-21 00:00:00        1.91                  8
    ##  8        8 May   2014  2014-05-28 00:00:00        3.7                  16
    ##  9        9 June  2014  2014-06-05 00:00:00        2.52                 14
    ## 10       10 June  2014  2014-06-11 00:00:00        3.76                 18
    ## # ℹ 574 more rows
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>

### Professor Trash Wheel

We use the same methods for Professor Trash Wheel sheet:

- specify the sheet in the Excel file and to omit non-data entries (rows
  with notes / figures; columns containing notes) using arguments in
  `read_excel()`
- use reasonable variable names by `janitor::clean_names()`
- omit rows that do not include dumpster-specific data by
  `filter(row_number() <= n()-1)` to delete the last row
- Home power notes mentioned each ton of trash equates to on average 500
  kilowatts of electricity and an average household will use 30
  kilowatts per day. Based on this information, we can calculate the
  number of homes powered by Mr. Trash Wheel `homes_powered` by
  `mutate(homes_powered=weight_tons*500/30)`.

``` r
professor_trash_wheel = read_excel("./202309 Trash Wheel Collection Data.xlsx", 
                                   sheet="Professor Trash Wheel", 
                                   range = cell_cols("A:M"))|>
  janitor::clean_names()|> 
  filter(row_number() <= n()-1)|>
  mutate(homes_powered=weight_tons*500/30)

professor_trash_wheel
```

    ## # A tibble: 106 × 13
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
    ##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
    ##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
    ## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
    ## # ℹ 96 more rows
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>

### Gwynnda

We use the same methods for Gwynnda Trash Wheel sheet:

- specify the sheet in the Excel file and to omit non-data entries (rows
  with notes / figures; columns containing notes) using arguments in
  `read_excel()`
- use reasonable variable names by `janitor::clean_names()`
- omit rows that do not include dumpster-specific data by
  `filter(row_number() <= n()-2)` to delete the last two rows
- Home power notes mentioned each ton of trash equates to on average 500
  kilowatts of electricity and an average household will use 30
  kilowatts per day. Based on this information, we can calculate the
  number of homes powered by Mr. Trash Wheel `homes_powered` by
  `mutate(homes_powered=weight_tons*500/30)`.

``` r
gwynnda_trash_wheel = read_excel("./202309 Trash Wheel Collection Data.xlsx", 
                                   sheet="Gwynnda Trash Wheel", 
                                   range = cell_cols("A:L"))|>
  janitor::clean_names()|> 
  filter(row_number() <= n()-2)|>
  mutate(homes_powered=weight_tons*500/30)

gwynnda_trash_wheel
```

    ## # A tibble: 155 × 12
    ##    dumpster month   year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
    ##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
    ##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
    ## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
    ## # ℹ 145 more rows
    ## # ℹ 6 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>
